!function(){"use strict";class e{constructor(e,t,s,n,r){let{name:o,link:i,_id:a,isLiked:l}=e;this._name=o,this._link=i,this._id=a,this._cardSelector=t,this._handleImageClick=s,this._handleCardDelete=n,this._handleLikeClick=r,this._isliked=l}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeClick(this)})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleCardDelete({id:this._id,cardElement:this._cardElement})})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}toggleLikeIcon(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}getView(){return this._cardElement=document.querySelector("#card-template").content.querySelector(".card").cloneNode(!0),this._setEventListeners(),this._cardElement.querySelector(".card__title").textContent=this._name,this._cardElement.querySelector(".card__image").src=this._link,this._cardElement.querySelector(".card__image").alt=this._name,this._cardElement}_setEventlisteners(){}}var t=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButttonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inputEls=t.querySelectorAll(this._inputSelector),this._formElement=t,this._submitButton=t.querySelector(this._submitButttonSelector)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.remove(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_toggleButtonState(){this._hasInvalidInput(this._inputEls)?this.disableButton():(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_hasInvalidInput(){return!Array.from(this._inputEls).every((e=>e.validity.valid))}_setEventlisteners(){this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventlisteners()}};class s{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}class n{constructor(e){let{modalSelector:t}=e;this._modalElement=document.querySelector(t),this._closeButton=this._modalElement.querySelector(".modal__close"),this._handleEscClose=this._handleEscClose.bind(this),this._handleCloseOverlay=this._handleCloseOverlay.bind(this)}open(){this._modalElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._modalElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}_handleCloseOverlay(e){e.target===this._modalElement&&this.close()}setEventListeners(){this._modalElement.querySelector(".modal__close").addEventListener("click",(()=>this.close())),this._modalElement.addEventListener("click",this._handleCloseOverlay)}}var r=class extends n{constructor(e,t){super({modalSelector:e}),this._modalForm=this._modalElement.querySelector(".modal__form"),this._handleFormSubmit=t}close(){super.close()}getInputValues(){const e=this._modalForm.querySelectorAll("input"),t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){this._modalForm.addEventListener("submit",(e=>{e.preventDefault();const t=this.getInputValues();this._handleFormSubmit(t),this._modalForm.reset()})),super.setEventListeners()}};const o={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};const i=new class{constructor(e){let{baseUrl:t,authToken:s}=e;this._baseUrl=t,this._authToken=s}getUsers=()=>fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:{authorization:this._authToken,"Content-Type":"application/json"}}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)));editUserInfo=(e,t)=>fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json",authorization:this._authToken},body:JSON.stringify({name:e,about:t})}).then((e=>e.ok?e.json():Promise.reject(new Error(`Error: ${e.status}`)))).catch((e=>console.error("Request failed",e)));updateAvatar=e=>fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:{authorization:this._authToken,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)));getCards=()=>fetch(`${this._baseUrl}/cards`,{method:"GET",headers:{authorization:this._authToken}}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)));addCard=e=>{let{name:t,link:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:{authorization:this._authToken,"Content-Type":"application/json"},body:JSON.stringify({name:t,link:s})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))};deleteCard=e=>fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:{authorization:this._authToken,"Content-Type":"application/json"}}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)));likeCard=(e,t,s)=>fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:{authorization:this._authToken,"Content-Type":"application/json"},body:JSON.stringify({name:t,link:s})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)));dislikeCard=(e,t,s)=>fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:{authorization:this._authToken,"Content-Type":"application/json"},body:JSON.stringify({name:t,link:s})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}({baseUrl:"https://around-api.en.tripleten-services.com/v1",authToken:"d88a2b9a-3c17-46af-b0b4-5a460d3316a6"});let a;i.getCards().then((e=>{console.log(e),a=new s({items:e,renderer:e=>{const t=C(e);a.addItem(t)}},".cards__list"),a.renderItems()}));const l=document.querySelector("#profile-edit-button"),c=document.querySelector("#profile-edit-modal"),d=document.querySelector("#profile-title-input"),h=document.querySelector("#profile-description-input"),m=document.querySelector(".profile__add-button"),u=document.querySelector("#add-new-card-modal").querySelector(".modal__form"),_=c.querySelector(".modal__form");document.querySelector("#modal-preview").querySelector(".modal__close");const p=new class{constructor(e){let{nameSelector:t,descriptionSelector:s,avatarSelector:n}=e;this._nameElement=document.querySelector(t),this._descriptionElement=document.querySelector(s),this._avatarElement=document.querySelector(n)}getUserInfo(){return{name:this._nameElement.textContent,description:this._descriptionElement.textContent}}setUserInfo(e){let{name:t,description:s}=e;this._nameElement.textContent=t,this._descriptionElement.textContent=s}setAvatar(e){this._avatarElement.src=e}}({nameSelector:".profile__title",descriptionSelector:".profile__description",avatarSelector:".profile__image"});function E(e){e._isLiked?i.dislikeCard(e._id).then((()=>{e.toggleLikeIcon()})):i.likeCard(e._id).then((()=>{e.toggleLikeIcon()}))}i.getUsers().then((e=>{p.setUserInfo({name:e.name,description:e.about}),p.setAvatar(e.avatar)}));const v=new r("#avatar-modal",(e=>{let{url:t}=e;i.updateAvatar(t).then((e=>{p.setAvatar(e.avatar),avatarForm.reset(),v.close()})).catch((e=>{console.error("Failed to update avatar:",e)}))}));v.setEventListeners(),document.querySelector(".profile__image-btn").addEventListener("click",(()=>{v.open()}));const S=new r("#profile-edit-modal",(function(e){const t=e.title,s=e.description;i.editUserInfo(t,s),p.setUserInfo({name:t,description:s}),S.close()}));S.setEventListeners();const y=new r("#add-new-card-modal",(function(e){const t={name:e.title,link:e.url},s=C(t);i.addCard(t).then((e=>{a.addItem(s)})),y.close(),u.reset(),g.disableButton()}));y.setEventListeners(),l.addEventListener("click",(()=>{const{name:e,description:t}=p.getUserInfo();d.value=e,h.value=t,S.open()})),m.addEventListener("click",(()=>{y.open()}));const k=new class extends n{constructor(e){let{modalSelector:t}=e;super({modalSelector:t}),this._modalImage=this._modalElement.querySelector(".modal__image"),this._modalCaption=this._modalElement.querySelector(".modal__caption")}open(e){let{name:t,link:s}=e;this._modalImage.src=s,this._modalImage.alt=t,this._modalCaption.textContent=t,super.open()}}({modalSelector:"#modal-preview"});function b(e){k.open({name:e.name,link:e.link})}function C(t){return new e(t,"#card-template",b,L,E).getView()}k.setEventListeners();const f=new class extends n{constructor(e){super({modalSelector:e})}setSubmitFunction(e){this._submitFunction=e}setEventListeners(){console.log(123),this._modalElement.querySelector(".modal__form").addEventListener("submit",(e=>{e.preventDefault(),this._submitFunction()})),super.setEventListeners()}}("#delete-modal");function L(e){f.open(),f.setSubmitFunction((()=>{i.deleteCard(e.id).then((()=>{e.cardElement.remove(),f.close()}))}))}f.setEventListeners();const g=new t(o,u);g.enableValidation(),new t(o,_).enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QnNDLEVBQVdoRyxLQUFLLENBQUV4RixLQUFNa0osRUFBU2xKLEtBQU1DLEtBQU1pSixFQUFTakosTUFDeEQsQ0FFQSxTQUFTa0osRUFBV0QsR0FTbEIsT0FSYSxJQUFJekosRUFDZnlKLEVBQ0EsaUJBQ0FySixFQUNBQyxFQUNBQyxHQUdVc0IsU0FDZCxDQWZBbUssRUFBVzFGLG9CQWlCWCxNQUFNNkYsRUFBYyxJR3BMcEIsY0FBK0IxRyxFQUM3QnZGLFdBQUFBLENBQVl3RixHQUNWYyxNQUFNLENBQUVkLGlCQUNWLENBRUEwRyxpQkFBQUEsQ0FBa0JDLEdBQ2hCekwsS0FBSzBMLGdCQUFrQkQsQ0FDekIsQ0FFQS9GLGlCQUFBQSxHQUNFc0MsUUFBUWEsSUFBSSxLQUNaN0ksS0FBSytFLGNBQ0ZyRSxjQUFjLGdCQUNkQyxpQkFBaUIsVUFBVzRFLElBQzNCQSxFQUFNdkIsaUJBQ05oRSxLQUFLMEwsaUJBQWlCLElBRTFCOUYsTUFBTUYsbUJBQ1IsR0hrS3VDLGlCQUV6QyxTQUFTaEcsRUFBaUJ5SyxHQUN4Qm9CLEVBQVluRyxPQUVabUcsRUFBWUMsbUJBQWtCLEtBQzVCakYsRUFBSWdDLFdBQVc0QixFQUFLdkosSUFBSXFHLE1BQUssS0FDM0JrRCxFQUFLdEosWUFBWWlDLFNBQ2pCeUksRUFBWWxHLE9BQU8sR0FDbkIsR0FFTixDQVZBa0csRUFBWTdGLG9CQVlaLE1BQU15RixFQUFtQixJQUFJUSxFQUFjbEssRUFBUTRILEdBQ25EOEIsRUFBaUJySCxtQkFDWSxJQUFJNkgsRUFBY2xLLEVBQVE2SCxHQUNsQ3hGLGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Nb2RhbC5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy91dGlscy9BcGkuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Nb2RhbFdpdGhGb3JtLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvTW9kYWxXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Nb2RhbFdpdGhDb25maXJtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgeyBuYW1lLCBsaW5rLCBfaWQsIGlzTGlrZWQgfSxcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVDYXJkRGVsZXRlLFxyXG4gICAgaGFuZGxlTGlrZUNsaWNrXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5faWQgPSBfaWQ7XHJcbiAgICAvLyBhc3NpZ24gaXNMaWtlZCB0byB0aGlzIG9iamVjdFxyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkRGVsZXRlID0gaGFuZGxlQ2FyZERlbGV0ZTtcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcclxuICAgIHRoaXMuX2lzbGlrZWQgPSBpc0xpa2VkO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmREZWxldGUoe1xyXG4gICAgICAgICAgaWQ6IHRoaXMuX2lkLFxyXG4gICAgICAgICAgY2FyZEVsZW1lbnQ6IHRoaXMuX2NhcmRFbGVtZW50LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcclxuICAvLyAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gIC8vICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIC8vIH1cclxuXHJcbiAgdG9nZ2xlTGlrZUljb24oKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxyXG4gICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIC8vIGNhbGwgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnNcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRsaXN0ZW5lcnMoKSB7fVxyXG59XHJcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0dG9uU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG5cclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2UudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JNZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dEVscykpIHtcclxuICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiAhQXJyYXkuZnJvbSh0aGlzLl9pbnB1dEVscykuZXZlcnkoXHJcbiAgICAgIChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50bGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRsaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGFsIHtcclxuICBjb25zdHJ1Y3Rvcih7IG1vZGFsU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fbW9kYWxFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihtb2RhbFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xyXG5cclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX2hhbmRsZUNsb3NlT3ZlcmxheSA9IHRoaXMuX2hhbmRsZUNsb3NlT3ZlcmxheS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX21vZGFsRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZShldmVudCkge1xyXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlQ2xvc2VPdmVybGF5KGV2ZW50KSB7XHJcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSB0aGlzLl9tb2RhbEVsZW1lbnQpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG4gICAgdGhpcy5fbW9kYWxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVDbG9zZU92ZXJsYXkpO1xyXG4gIH1cclxufVxyXG4iLCJjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgYXV0aFRva2VuIH0pIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5fYXV0aFRva2VuID0gYXV0aFRva2VuO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlcnMgPSAoKSA9PlxyXG4gICAgZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhUb2tlbixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gaWYgdGhlIHNlcnZlciByZXR1cm5zIGFuIGVycm9yLCByZWplY3QgdGhlIHByb21pc2VcclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcblxyXG4gIGVkaXRVc2VySW5mbyA9IChuYW1lLCBhYm91dCkgPT5cclxuICAgIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLCAvLyBJbmNsdWRlIENvbnRlbnQtVHlwZSBoZWFkZXJcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRoVG9rZW4sXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLCAvLyBVc2UgdGhlIHBhcmFtZXRlcnMgZGlyZWN0bHlcclxuICAgICAgICBhYm91dDogYWJvdXQsXHJcbiAgICAgIH0pLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiB0aGUgc2VydmVyIHJldHVybnMgYW4gZXJyb3IsIHJlamVjdCB0aGUgcHJvbWlzZSB3aXRoIGEgc3RhdHVzIG1lc3NhZ2VcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKGBFcnJvcjogJHtyZXMuc3RhdHVzfWApKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihcIlJlcXVlc3QgZmFpbGVkXCIsIGVycm9yKSk7IC8vIENhdGNoIGFuZCBsb2cgYW55IGVycm9yc1xyXG5cclxuICB1cGRhdGVBdmF0YXIgPSAobmV3QXZhdGFyKSA9PlxyXG4gICAgZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhUb2tlbixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXI6IG5ld0F2YXRhciB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gaWYgdGhlIHNlcnZlciByZXR1cm5zIGFuIGVycm9yLCByZWplY3QgdGhlIHByb21pc2VcclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcblxyXG4gIGdldENhcmRzID0gKCkgPT5cclxuICAgIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRoVG9rZW4sXHJcbiAgICAgIH0sXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIGlmIHRoZSBzZXJ2ZXIgcmV0dXJucyBhbiBlcnJvciwgcmVqZWN0IHRoZSBwcm9taXNlXHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0pO1xyXG4gIC8vaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvY2FyZHNcclxuXHJcbiAgYWRkQ2FyZCA9ICh7IG5hbWUsIGxpbmsgfSkgPT4ge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aFRva2VuLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgZGVsZXRlQ2FyZCA9IChjYXJkSWQpID0+XHJcbiAgICBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhUb2tlbixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgbGlrZUNhcmQgPSAoY2FyZElkLCBuYW1lLCBsaW5rKSA9PlxyXG4gICAgZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRoVG9rZW4sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgbGluayB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgZGlzbGlrZUNhcmQgPSAoY2FyZElkLCBuYW1lLCBsaW5rKSA9PlxyXG4gICAgZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRoVG9rZW4sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgbGluayB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFwaTtcclxuIiwiaW1wb3J0IE1vZGFsIGZyb20gXCIuL01vZGFsLmpzXCI7XHJcblxyXG5jbGFzcyBNb2RhbFdpdGhGb3JtIGV4dGVuZHMgTW9kYWwge1xyXG4gIGNvbnN0cnVjdG9yKG1vZGFsU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHsgbW9kYWxTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX21vZGFsRm9ybSA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfVxyXG5cclxuICBnZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0cyA9IHRoaXMuX21vZGFsRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRcIik7XHJcbiAgICBjb25zdCB2YWx1ZXMgPSB7fTtcclxuXHJcbiAgICBpbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gdmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9tb2RhbEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBQcmV2ZW50IHRoZSBkZWZhdWx0IGZvcm0gc3VibWlzc2lvblxyXG4gICAgICBjb25zdCBmb3JtRGF0YSA9IHRoaXMuZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdChmb3JtRGF0YSk7IC8vIENvcnJlY3RseSBwYXNzIGZvcm1EYXRhIHRvIHRoZSBzdWJtaXNzaW9uIGhhbmRsZXJcclxuICAgICAgdGhpcy5fbW9kYWxGb3JtLnJlc2V0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTW9kYWxXaXRoRm9ybTtcclxuIiwiZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBNb2RhbFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Nb2RhbFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vdXRpbHMvQXBpLmpzXCI7XHJcbmltcG9ydCBNb2RhbFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL01vZGFsV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IE1vZGFsV2l0aENvbmZpcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvTW9kYWxXaXRoQ29uZmlybS5qc1wiO1xyXG5cclxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnRzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGF1dGhUb2tlbjogXCJkODhhMmI5YS0zYzE3LTQ2YWYtYjBiNC01YTQ2MGQzMzE2YTZcIixcclxufSk7XHJcblxyXG5sZXQgY2FyZFNlY3Rpb247XHJcblxyXG5hcGkuZ2V0Q2FyZHMoKS50aGVuKChpbml0aWFsQ2FyZHMpID0+IHtcclxuICBjb25zb2xlLmxvZyhpbml0aWFsQ2FyZHMpO1xyXG4gIGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAgICB7XHJcbiAgICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcclxuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xyXG4gICAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIFwiLmNhcmRzX19saXN0XCJcclxuICApO1xyXG4gIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcbn0pO1xyXG5cclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcclxuY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcclxuKTtcclxuY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuY29uc3QgYWRkTmV3Q2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtbmV3LWNhcmQtbW9kYWxcIik7XHJcbmNvbnN0IGFkZENhcmRGb3JtRWxlbWVudCA9IGFkZE5ld0NhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG5jb25zdCBwcm9maWxlRWRpdEZvcm0gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcblxyXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRnVuY3Rpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuY29uc3QgcHJldmlld0ltYWdlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLXByZXZpZXdcIik7XHJcblxyXG5jb25zdCBwcmV2aWV3TW9kYWxDbG9zZUJ1dHRvbiA9XHJcbiAgcHJldmlld0ltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XHJcblxyXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnQgSGFuZGxlcnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdChmb3JtVmFsdWVzKSB7XHJcbiAgY29uc3QgbmFtZUlucHV0ID0gZm9ybVZhbHVlcy50aXRsZTtcclxuICBjb25zdCBkZXNjcmlwdGlvbklucHV0ID0gZm9ybVZhbHVlcy5kZXNjcmlwdGlvbjtcclxuXHJcbiAgYXBpLmVkaXRVc2VySW5mbyhuYW1lSW5wdXQsIGRlc2NyaXB0aW9uSW5wdXQpO1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgIG5hbWU6IG5hbWVJbnB1dCxcclxuICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbklucHV0LFxyXG4gIH0pO1xyXG4gIHByb2ZpbGVNb2RhbC5jbG9zZSgpO1xyXG59XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX190aXRsZVwiLFxyXG4gIGRlc2NyaXB0aW9uU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXHJcbiAgYXZhdGFyU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2ltYWdlXCIsXHJcbn0pO1xyXG5cclxuYXBpLmdldFVzZXJzKCkudGhlbigodXNlckRhdGEpID0+IHtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICBuYW1lOiB1c2VyRGF0YS5uYW1lLFxyXG4gICAgZGVzY3JpcHRpb246IHVzZXJEYXRhLmFib3V0LFxyXG4gIH0pO1xyXG4gIHVzZXJJbmZvLnNldEF2YXRhcih1c2VyRGF0YS5hdmF0YXIpO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRTdWJtaXQoaW5wdXRWYWx1ZXMpIHtcclxuICBjb25zdCBjYXJkRGF0YSA9IHtcclxuICAgIG5hbWU6IGlucHV0VmFsdWVzLnRpdGxlLFxyXG4gICAgbGluazogaW5wdXRWYWx1ZXMudXJsLFxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNhcmRWaWV3ID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XHJcbiAgYXBpLmFkZENhcmQoY2FyZERhdGEpLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkVmlldyk7XHJcbiAgfSk7XHJcblxyXG4gIGFkZE1vZGFsLmNsb3NlKCk7XHJcbiAgYWRkQ2FyZEZvcm1FbGVtZW50LnJlc2V0KCk7XHJcbiAgYWRkQ2FyZFZhbGlkYXRvci5kaXNhYmxlQnV0dG9uKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUxpa2VDbGljayhjYXJkKSB7XHJcbiAgaWYgKGNhcmQuX2lzTGlrZWQpIHtcclxuICAgIGFwaS5kaXNsaWtlQ2FyZChjYXJkLl9pZCkudGhlbigoKSA9PiB7XHJcbiAgICAgIGNhcmQudG9nZ2xlTGlrZUljb24oKTtcclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBhcGkubGlrZUNhcmQoY2FyZC5faWQpLnRoZW4oKCkgPT4ge1xyXG4gICAgICBjYXJkLnRvZ2dsZUxpa2VJY29uKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IGF2YXRhck1vZGFsID0gbmV3IE1vZGFsV2l0aEZvcm0oXCIjYXZhdGFyLW1vZGFsXCIsICh7IHVybCB9KSA9PiB7XHJcbiAgYXBpXHJcbiAgICAudXBkYXRlQXZhdGFyKHVybClcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgdXNlckluZm8uc2V0QXZhdGFyKHJlcy5hdmF0YXIpOyAvLyBVcGRhdGUgdGhlIGF2YXRhciBzcmMgd2l0aCB0aGUgcmVzcG9uc2UgZGF0YVxyXG4gICAgICBhdmF0YXJGb3JtLnJlc2V0KCk7XHJcbiAgICAgIGF2YXRhck1vZGFsLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byB1cGRhdGUgYXZhdGFyOlwiLCBlcnIpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5hdmF0YXJNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3Qgb3BlbkF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW1hZ2UtYnRuXCIpO1xyXG5vcGVuQXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYXZhdGFyTW9kYWwub3BlbigpO1xyXG59KTtcclxuXHJcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudCBMaXN0ZW5lciAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbmNvbnN0IHByb2ZpbGVNb2RhbCA9IG5ldyBNb2RhbFdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxyXG4gIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0XHJcbik7XHJcbnByb2ZpbGVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgYWRkTW9kYWwgPSBuZXcgTW9kYWxXaXRoRm9ybShcIiNhZGQtbmV3LWNhcmQtbW9kYWxcIiwgaGFuZGxlQWRkQ2FyZFN1Ym1pdCk7XHJcbmFkZE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IHsgbmFtZSwgZGVzY3JpcHRpb24gfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSBuYW1lO1xyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gZGVzY3JpcHRpb247XHJcbiAgcHJvZmlsZU1vZGFsLm9wZW4oKTtcclxufSk7XHJcblxyXG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkTW9kYWwub3BlbigpO1xyXG59KTtcclxuXHJcbmNvbnN0IGltYWdlTW9kYWwgPSBuZXcgTW9kYWxXaXRoSW1hZ2UoeyBtb2RhbFNlbGVjdG9yOiBcIiNtb2RhbC1wcmV2aWV3XCIgfSk7XHJcbmltYWdlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhjYXJkRGF0YSkge1xyXG4gIGltYWdlTW9kYWwub3Blbih7IG5hbWU6IGNhcmREYXRhLm5hbWUsIGxpbms6IGNhcmREYXRhLmxpbmsgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICBjYXJkRGF0YSxcclxuICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVDYXJkRGVsZXRlLFxyXG4gICAgaGFuZGxlTGlrZUNsaWNrXHJcbiAgKTtcclxuXHJcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xyXG59XHJcblxyXG5jb25zdCBkZWxldGVNb2RhbCA9IG5ldyBNb2RhbFdpdGhDb25maXJtKFwiI2RlbGV0ZS1tb2RhbFwiKTtcclxuZGVsZXRlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuZnVuY3Rpb24gaGFuZGxlQ2FyZERlbGV0ZShjYXJkKSB7XHJcbiAgZGVsZXRlTW9kYWwub3BlbigpO1xyXG5cclxuICBkZWxldGVNb2RhbC5zZXRTdWJtaXRGdW5jdGlvbigoKSA9PiB7XHJcbiAgICBhcGkuZGVsZXRlQ2FyZChjYXJkLmlkKS50aGVuKCgpID0+IHtcclxuICAgICAgY2FyZC5jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgZGVsZXRlTW9kYWwuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcblxyXG5jb25zdCBhZGRDYXJkVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBhZGRDYXJkRm9ybUVsZW1lbnQpO1xyXG5hZGRDYXJkVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuY29uc3QgZWRpdFByb2ZpbGVWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIHByb2ZpbGVFZGl0Rm9ybSk7XHJcbmVkaXRQcm9maWxlVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBkZXNjcmlwdGlvblNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9hdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgZGVzY3JpcHRpb24gfSkge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XHJcbiAgfVxyXG5cclxuICBzZXRBdmF0YXIoYXZhdGFyVXJsKSB7XHJcbiAgICAvLyBOZXcgYWRkaXRpb25cclxuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjID0gYXZhdGFyVXJsO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgTW9kYWwgZnJvbSBcIi4vTW9kYWwuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGFsV2l0aEltYWdlIGV4dGVuZHMgTW9kYWwge1xyXG4gIGNvbnN0cnVjdG9yKHsgbW9kYWxTZWxlY3RvciB9KSB7XHJcbiAgICBzdXBlcih7IG1vZGFsU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9tb2RhbEltYWdlID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fbW9kYWxDYXB0aW9uID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb25cIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICB0aGlzLl9tb2RhbEltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9tb2RhbEltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9tb2RhbENhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgTW9kYWwgZnJvbSBcIi4vTW9kYWwuanNcIjtcclxuXHJcbmNsYXNzIE1vZGFsV2l0aENvbmZpcm0gZXh0ZW5kcyBNb2RhbCB7XHJcbiAgY29uc3RydWN0b3IobW9kYWxTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoeyBtb2RhbFNlbGVjdG9yIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0U3VibWl0RnVuY3Rpb24oc3VibWl0Rm4pIHtcclxuICAgIHRoaXMuX3N1Ym1pdEZ1bmN0aW9uID0gc3VibWl0Rm47XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnNvbGUubG9nKDEyMyk7XHJcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB0aGlzLl9zdWJtaXRGdW5jdGlvbigpO1xyXG4gICAgICB9KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBNb2RhbFdpdGhDb25maXJtO1xyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVDYXJkRGVsZXRlIiwiaGFuZGxlTGlrZUNsaWNrIiwibmFtZSIsImxpbmsiLCJfaWQiLCJpc0xpa2VkIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfaGFuZGxlQ2FyZERlbGV0ZSIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfaXNsaWtlZCIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jYXJkRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiaWQiLCJjYXJkRWxlbWVudCIsInRvZ2dsZUxpa2VJY29uIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZ2V0VmlldyIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsInRleHRDb250ZW50Iiwic3JjIiwiYWx0IiwiX3NldEV2ZW50bGlzdGVuZXJzIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2lucHV0RWxzIiwicXVlcnlTZWxlY3RvckFsbCIsIl9mb3JtRWxlbWVudCIsIl9zdWJtaXRCdXR0b24iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInJlbW92ZSIsIl9oaWRlSW5wdXRFcnJvciIsImVycm9yTWVzc2FnZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVCdXR0b24iLCJkaXNhYmxlZCIsIkFycmF5IiwiZnJvbSIsImV2ZXJ5IiwiaW5wdXRFbCIsImZvckVhY2giLCJlIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJNb2RhbCIsIm1vZGFsU2VsZWN0b3IiLCJfbW9kYWxFbGVtZW50IiwiX2Nsb3NlQnV0dG9uIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIl9oYW5kbGVDbG9zZU92ZXJsYXkiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJrZXkiLCJ0YXJnZXQiLCJzZXRFdmVudExpc3RlbmVycyIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9tb2RhbEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsImdldElucHV0VmFsdWVzIiwiaW5wdXRzIiwidmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsImZvcm1EYXRhIiwicmVzZXQiLCJmb3JtU2VsZWN0b3IiLCJhcGkiLCJiYXNlVXJsIiwiYXV0aFRva2VuIiwiX2Jhc2VVcmwiLCJfYXV0aFRva2VuIiwiZ2V0VXNlcnMiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJlZGl0VXNlckluZm8iLCJhYm91dCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiRXJyb3IiLCJjYXRjaCIsImVycm9yIiwiY29uc29sZSIsInVwZGF0ZUF2YXRhciIsIm5ld0F2YXRhciIsImF2YXRhciIsImdldENhcmRzIiwiYWRkQ2FyZCIsIl9yZWYyIiwiZGVsZXRlQ2FyZCIsImNhcmRJZCIsImxpa2VDYXJkIiwiZGlzbGlrZUNhcmQiLCJjYXJkU2VjdGlvbiIsImluaXRpYWxDYXJkcyIsImxvZyIsImNhcmREYXRhIiwiY3JlYXRlQ2FyZCIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUVkaXRNb2RhbCIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJhZGROZXdDYXJkQnV0dG9uIiwiYWRkQ2FyZEZvcm1FbGVtZW50IiwicHJvZmlsZUVkaXRGb3JtIiwidXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJkZXNjcmlwdGlvblNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfZGVzY3JpcHRpb25FbGVtZW50IiwiX2F2YXRhckVsZW1lbnQiLCJnZXRVc2VySW5mbyIsImRlc2NyaXB0aW9uIiwic2V0VXNlckluZm8iLCJzZXRBdmF0YXIiLCJhdmF0YXJVcmwiLCJjYXJkIiwiX2lzTGlrZWQiLCJ1c2VyRGF0YSIsImF2YXRhck1vZGFsIiwiTW9kYWxXaXRoRm9ybSIsInVybCIsImF2YXRhckZvcm0iLCJlcnIiLCJwcm9maWxlTW9kYWwiLCJmb3JtVmFsdWVzIiwibmFtZUlucHV0IiwidGl0bGUiLCJkZXNjcmlwdGlvbklucHV0IiwiYWRkTW9kYWwiLCJpbnB1dFZhbHVlcyIsImNhcmRWaWV3IiwiYWRkQ2FyZFZhbGlkYXRvciIsImltYWdlTW9kYWwiLCJfbW9kYWxJbWFnZSIsIl9tb2RhbENhcHRpb24iLCJkZWxldGVNb2RhbCIsInNldFN1Ym1pdEZ1bmN0aW9uIiwic3VibWl0Rm4iLCJfc3VibWl0RnVuY3Rpb24iLCJGb3JtVmFsaWRhdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==